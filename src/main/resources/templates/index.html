<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="all,follow">

    <title>广告商后台</title>
    <link rel="shortcut icon" href="/img/favicon.ico">

    <link href="/css/dwa/bootstrap.min.css" rel="stylesheet"/>
    <link href="/css/dwa/bootstrap-responsive.min.css" rel="stylesheet"/>
    <link href="/css/dwa/style.min.css" rel="stylesheet"/>
    <link href="/css/dwa/style-responsive.min.css" rel="stylesheet"/>
    <link href="/css/dwa/retina.css" rel="stylesheet"/>
</head>

<body>

<div th:replace="component/header::header"></div>

<div class="container-fluid-full">
    <div class="row-fluid height100">
        <div th:replace="component/left_nav::left-nav('user')"></div>

        <!-- start: Content -->
        <div id="content" class="span10">


            <div class="row-fluid">

                <div class="span3 smallstat mobileHalf box" ontablet="span6" ondesktop="span3">
                    <i class="icon-money red"></i>
                    <span class="title">账户余额</span>
                    <span class="value"><span th:replace="util/currency::format(${userAmount})"></span></span>
                </div>

                <div class="span3 smallstat box mobileHalf" ontablet="span6" ondesktop="span3">
                    <i class="icon-money yellow"></i>
                    <span class="title">当日支付</span>
                    <span class="value"><span th:replace="util/currency::format(${todayConsumeAmount})"></span></span>
                </div>

                <div class="span3 smallstat box mobileHalf" ontablet="span6" ondesktop="span3">
                    <i class="icon-money blue"></i>
                    <span class="title">昨日支付</span>
                    <span class="value"><span th:replace="util/currency::format(${yesterdayConsumeAmount})"></span></span>
                </div>

                <div class="span3 smallstat box mobileHalf noMargin" ontablet="span6" ondesktop="span3">
                    <i class="icon-download-alt green"></i>
                    <span class="title">当月支付</span>
                    <span class="value"><span th:replace="util/currency::format(${monthConsumeAmount})"></span></span>
                </div>



            </div>

            <div class="row-fluid">
                <input id="logJson" type="hidden" th:value="${logJson}">
                <div id="container"></div>
            </div>

        </div>
        <!-- end: Content -->
    </div>

</div>

<!-- start: JavaScript-->
<script src="/js/dwa/jquery-1.10.2.min.js"></script>
<script src="/js/dwa/jquery-migrate-1.2.1.min.js"></script>
<script src="/js/dwa/jquery-ui-1.10.3.custom.min.js"></script>
<script src="/js/dwa/jquery.ui.touch-punch.js"></script>
<script src="/js/dwa/modernizr.js"></script>
<script src="/js/dwa/bootstrap.min.js"></script>
<script src="/js/dwa/jquery.cookie.js"></script>
<script src='/js/dwa/fullcalendar.min.js'></script>
<script src='/js/dwa/jquery.dataTables.min.js'></script>
<script src="/js/dwa/excanvas.js"></script>
<script src="/js/dwa/jquery.flot.js"></script>
<script src="/js/dwa/jquery.flot.pie.js"></script>
<script src="/js/dwa/jquery.flot.stack.js"></script>
<script src="/js/dwa/jquery.flot.resize.min.js"></script>
<script src="/js/dwa/jquery.flot.time.js"></script>

<script src="/js/dwa/jquery.chosen.min.js"></script>
<script src="/js/dwa/jquery.uniform.min.js"></script>
<script src="/js/dwa/jquery.cleditor.min.js"></script>
<script src="/js/dwa/jquery.noty.js"></script>
<script src="/js/dwa/jquery.elfinder.min.js"></script>
<script src="/js/dwa/jquery.raty.min.js"></script>
<script src="/js/dwa/jquery.iphone.toggle.js"></script>
<script src="/js/dwa/jquery.uploadify-3.1.min.js"></script>
<script src="/js/dwa/jquery.gritter.min.js"></script>
<script src="/js/dwa/jquery.imagesloaded.js"></script>
<script src="/js/dwa/jquery.masonry.min.js"></script>
<script src="/js/dwa/jquery.knob.modified.js"></script>
<script src="/js/dwa/jquery.sparkline.min.js"></script>
<script src="/js/dwa/counter.min.js"></script>
<script src="/js/dwa/raphael.2.1.0.min.js"></script>
<script src="/js/dwa/justgage.1.0.1.min.js"></script>
<script src="/js/dwa/jquery.autosize.min.js"></script>
<script src="/js/dwa/retina.js"></script>
<script src="/js/dwa/jquery.placeholder.min.js"></script>
<script src="/js/dwa/wizard.min.js"></script>
<script src="/js/dwa/core.min.js"></script>
<script src="/js/dwa/charts.min.js"></script>
<script src="/js/dwa/custom.min.js"></script>
<!-- end: JavaScript-->

<!--&lt;!&ndash;Chart &ndash;&gt;-->
<script src="/js/highcharts.js"></script>
<script>
    $(function () {
        var logJson = $("#logJson").val();
        var log = JSON.parse(logJson);
        var xArray = [];
        var execArray = [];
        var cpcArray = [];
        for (var i in log) {
            xArray.push(toDate(log[i].recordTime));
            execArray.push(log[i].exec);
            cpcArray.push(log[i].cpc);
        }
        Highcharts.chart('container', {
            title: {
                text: '当月效果报表'
            },
            xAxis: {
                categories: xArray
            },
            yAxis: {
                title: {
                    text: ''
                }
            },
            tooltip: {
                crosshairs: true,
                shared: true
            },
            plotOptions: {
                spline: {
                    marker: {
                        radius: 4,
                        lineColor: '#666666',
                        lineWidth: 1
                    }
                }
            },
            series: [{
                name: '网页浏览量',
                data: execArray
            }, {
                name: 'cpc',
                data: cpcArray
            }],
            credits: {

                enabled: false

            }
        });
    });

    function toDate(timestamp) {
        var date = new Date(timestamp * 1000);
        var Y = date.getFullYear() + '-';
        var M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';
        var D = date.getDate();
        return Y + M + D;
    }
</script>

</body>

</html>